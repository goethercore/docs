import{_ as n,o as s,c as a,a as t}from"./app-9Ay8wPGQ.js";const o={},p=t(`<h1 id="mempool" tabindex="-1"><a class="header-anchor" href="#mempool"><span>MemPool</span></a></h1><h2 id="stream-mempool-transaction" tabindex="-1"><a class="header-anchor" href="#stream-mempool-transaction"><span>Stream Mempool transaction</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ListenMempool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	poolCh <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> rpc <span class="token operator">=</span> <span class="token string">&quot;wss://polygon-mumbai.g.alchemy.com/v2/A7mvet09ATzDQmzbzQ8RNcn8X9lpTUR2&quot;</span>

	<span class="token keyword">go</span> mempool<span class="token punctuation">.</span><span class="token function">StreamMempoolTransactions</span><span class="token punctuation">(</span>rpc<span class="token punctuation">,</span> poolCh<span class="token punctuation">)</span>
	<span class="token keyword">for</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> poolCh <span class="token punctuation">{</span>
		<span class="token keyword">var</span> poolData types<span class="token punctuation">.</span>MempoolData
		<span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>poolData<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;error unmarshaling&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>
		amount<span class="token punctuation">,</span> err <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">DecodeBig</span><span class="token punctuation">(</span>poolData<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;error decoding hex value&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Transaction From: %s of %s to %s \\n&quot;</span><span class="token punctuation">,</span> poolData<span class="token punctuation">.</span>From<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> poolData<span class="token punctuation">.</span>To<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="stream-contract-mempool-transaction" tabindex="-1"><a class="header-anchor" href="#stream-contract-mempool-transaction"><span>Stream Contract Mempool Transaction</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ListenSmartContractMempoolTx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	poolCh <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
   <span class="token keyword">var</span> contractAddress<span class="token operator">=</span><span class="token string">&quot;0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063&quot;</span>
	<span class="token keyword">var</span> rpc <span class="token operator">=</span> <span class="token string">&quot;wss://polygon-mainnet.g.alchemy.com/v2/*************&quot;</span>

	<span class="token keyword">go</span> mempool<span class="token punctuation">.</span><span class="token function">ContractMempoolTransactions</span><span class="token punctuation">(</span>rpc<span class="token punctuation">,</span>contractAddress<span class="token punctuation">,</span> poolCh<span class="token punctuation">)</span>
	<span class="token keyword">for</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> poolCh <span class="token punctuation">{</span>
		<span class="token keyword">var</span> poolData types<span class="token punctuation">.</span>MempoolData
		<span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>poolData<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;error unmarshaling&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>
		amount<span class="token punctuation">,</span> err <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">ConvertHexToBigInt</span><span class="token punctuation">(</span>poolData<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;error decoding hex value&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Transaction From: %s of %s to %s \\n&quot;</span><span class="token punctuation">,</span> poolData<span class="token punctuation">.</span>From<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> poolData<span class="token punctuation">.</span>To<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token string">\`Returns\`</span>
  The reponse data returned looks like this
  <span class="token string">\`\`</span>\`json
  Transaction From<span class="token punctuation">:</span> <span class="token number">0x5fb184b266ed8132e94880c94d7f6b1033e24f67</span> of <span class="token number">226673.591177742970257408</span> to <span class="token number">0xa28663b53fb7e4c2b37293f1ac7bfb02976cad93</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),e=[p];function c(l,i){return s(),a("div",null,e)}const r=n(o,[["render",c],["__file","mempool.html.vue"]]),k=JSON.parse('{"path":"/mempool.html","title":"MemPool","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Stream Mempool transaction","slug":"stream-mempool-transaction","link":"#stream-mempool-transaction","children":[]},{"level":2,"title":"Stream Contract Mempool Transaction","slug":"stream-contract-mempool-transaction","link":"#stream-contract-mempool-transaction","children":[]}],"git":{"updatedTime":1710598408000,"contributors":[{"name":"Ayo Solomon","email":"48213053+Ayoseun@users.noreply.github.com","commits":2}]},"filePathRelative":"mempool.md"}');export{r as comp,k as data};
